<?xml version="1.0" encoding="UTF-8"?>
<sequence name="faultSeq" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <!-- logging the fact that there was a fault on delivering the message -->
    <log level="custom">
        <property name="LOG-FAULT-SEQUENCE" expression="get-property('origPayload')"/>
    </log>
    <!-- saving the original message (which is already in memory)-->
    <store description="OrderPayment Error Message Queue" messageStore="OrderPaymentErrorMQ"/>
    <!-- Ack for completion of the storage operation -->
    <property description="Generate 202 response from mediation flow" name="FORCE_SC_ACCEPTED" scope="axis2" type="STRING" value="true"/>
    <property name="HTTP_SC" scope="axis2" type="STRING" value="202"/>
    <log level="custom">
        <property name="LOG-FAULT-SEQUENCE" value=" message sent to error message store"/>
    </log>
    <respond/>  <!-- RESPOND WITH A 202 to indicate message was accepted to be sent to an error queue for later processing -->
</sequence>